<% content_for :title do %>
  <title>Plans for Day #{@day.day} | Trip Planner</title>
<% end %>

<div class=" container">
  <div class="row">
    <div class="col-xs-12">
      <h1>
        Day #{@day.day}
        <%= link_to 'Delete', day_path, class: 'button alert right' %>
      </h1>
      <hr>
      <article>
        <section>
          <h3>Plans:</h3>
          <% @trip_plans.each do |i| %>
            <p>At #{i.time} in Day #{i.date} for #{i.duration}.</p>
            <p><%= i.notes %></p>
            <b>Place:</b>
            <% if i.place %>
              <p>Name: #{i.place.name}</p>
              <p>Description: #{i.place.description}</p>
              <p>Location: #{i.place.location}</p>
              <p>URL: #{link_to i.place.url, i.place.url}</p>
              <%= link_to 'Edit', edit_trip_plan_place_path(i.place), class: 'button tiny' %>
              <%= link_to 'Delete', trip_plan_place_path(i.place), method: :delete, class: 'button tiny warning' %>
            <% else %>
              <%= link_to 'Add a Place', new_trip_plan_place_path(i.place), class: 'button' %>
            <% end %>
            <br>
            <br>
            <%= link_to 'Edit This Plan', edit_trip_plan_path(i), class: 'button' %>
            <%= link_to 'Delete Plan', i, method: :delete, class: 'button alert' %>
            <hr>
          <% end %>
          <div id="map"></div>
          <script>
            var map = new google.maps.Map(document.getElementById('map'), { center: { lat: -34, lng: 150 }, zoom: 8 });
            <% @trip_plans.each do |i| %>
              <script>
                map.setCenter({ lat: #{i.place.lat}, lng: #{i.place.long} });new google.maps.Marker({map: map, position: { lat: #{i.place.lat}, lng: #{i.place.long} }});
              </script>
          </script>
        </section>
      </article>
    </div>
  </div>
</div>
